import{createClient as i}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/+esm";import{supabaseConfig as n}from"./config-N_0HKkEA.js";function s(){const t=window.location.pathname;let o="";t.includes("/stories/")||t.includes("student-dashboard")?o="/stories/index.html":t.includes("/parent/")?o="/parent/dashboard.html":t.includes("teacher-dashboard")&&(o="/dashboards/teacher-dashboard.html"),o&&d(o)}function d(t){const o=document.querySelectorAll('a[href*="index.html"]'),a=window.location.pathname;o.forEach(e=>{if(e.textContent.includes("SciQuest Heroes")){if(a.endsWith(t)||t.endsWith("index.html")&&a.endsWith("/stories/")||a===t)e.href="#",e.hasAttribute("data-logo-handled")||(e.addEventListener("click",r=>{r.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),e.setAttribute("data-logo-handled","true"));else if(e.href=t,e.getAttribute("href")!=="#"&&e.hasAttribute("data-logo-handled")){const r=e.cloneNode(!0);e.parentNode.replaceChild(r,e)}}})}async function c(){if(s(),!(!n?.url||!n?.anonKey))try{const t=i(n.url,n.anonKey),{data:{session:o}}=await t.auth.getSession();if(o){const{data:a}=await t.from("user_profiles").select("account_type").eq("id",o.user.id).maybeSingle();if(a){let e="";a.account_type==="student"?e="/stories/index.html":a.account_type==="parent"?e="/parent/dashboard.html":a.account_type==="teacher"&&(e="/dashboards/teacher-dashboard.html"),e&&d(e)}}}catch(t){console.error("Error in logo handler:",t)}}c();document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",()=>s());
